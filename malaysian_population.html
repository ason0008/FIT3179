<!DOCTYPE html>
<html>
  <head>
    <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
    <!-- Import vega-embed -->
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <link rel="stylesheet" href="https://ason0008.github.io/FIT3179/visualisation-styles.css">
  </head>

  <body>
    <div class="main-title">POPULATION DEMOGRAPHICS OF MALAYSIA 2020</div>
    <div class="introductionA">In scientific terms, demographics is the study of population based on different parameters. This visualisation serves to examine Malaysia's population demographic</div>
    <div class="introductionB">based on population density, population changes, gender, age group and ethnicity. The population of Malaysia in 2020 is estimated to be 32.65 million.</div>
    <div class="map-title">Population Density of States</div>
    <div class="map-grid">
      <div id="map"></div>
    </div>
    <div class="filter-map-caption">Click on each state to reveal a fun fact!</div>
    <div class="map-summary">There are 13 states and 3 federal territories in Malaysia. From the map, we can see that most Malaysians congregate at Peninsular Malaysia, particularly on the West coast where major metropolitan areas like Klang Valley are located. Renowned as the business hub of Malaysia, Kuala Lumpur is crowned the most populated state, while Sarawak is the least crowded given its vast land area.</div>

    <div class="connector">But how did we get to this point today? Has the population density of each state always been the same? Let's delve deeper into the population changes of Malaysia over the past decade!</div>

    <div class="waterfall-title">Population Changes of Malaysia in the Past 10 Years</div>
    <div class="waterfall-grid">
      <div id="waterfall"></div>
    </div>
    <div class="waterfall-summary">Based on the waterfall chart above, there is a steady population growth in all the states for the past decade with the exception of Federal Territory of Kuala Lumpur, which has recorded a drop in population. In general, the population of Malaysia is increasing, but at a declining rate. If this trend continues, Malaysia's population can be expected to plateau at a certain point, as do most developed countries.</div>

    <div class="connector">To better understand the Malaysian population demographics, we shall examine the age, gender and ethnicity breakdown of this country.</div>

    <div class="heatmap-title">Population of States based on Age and Ethnicity</div>
    <div class="heatmap-grid">
      <div id="donut_heatmap"></div>
    </div>
    <div class="filter-heatmap-caption">Click on the donut chart to filter the heatmap based on ethnicity!</div>
    <div class="donut-caption">The 3 main ethnicities of Malaysia consist of Bumiputera (indigenous community and Malays), Chinese and Indian.</div>
    <img src="./data/gender_symbol.png" width="auto" height="110" style="position:absolute;vertical-align:middle;margin:-260px 246px"/>
    <div class="gender-caption">In 2020, the female population is 15851700 while the male population is 16805600.</div>
    <div class="heatmap-summary">The diagrams above reveal that majority of Malaysians are in their 30s and late 20s. The largest ethnicity group in Malaysia is Bumiputera, followed by Chinese and Indian. Interestingly, non-Malaysian immigrants make up one-tenth of the Malaysian population. The gender ratio is rather even.</div>

    <div class="conclusion">Population studies are indispensable in understanding historical trends, to make sense of the observed economics and in preparing future policies and development. This visualisation serves to communicate this important piece of information through various intriguing graphics.</div>

    <div class="authorship">Design by: Amber Song Xin Ying</div>
    <div class="source">Data: Department of Statistics Malaysia Official Portal</div>

    <script type="text/javascript">
        var map = "https://ason0008.github.io/FIT3179/idioms/map.json";
        var waterfall = "https://ason0008.github.io/FIT3179/idioms/waterfall.json";
        var donut_heatmap = "https://ason0008.github.io/FIT3179/idioms/donut_heatmap.json";

        vegaEmbed('#map', map).then(function(result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        vegaEmbed('#waterfall', waterfall).then(function(result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);
        
        vegaEmbed('#donut_heatmap', donut_heatmap).then(function(result) {
          // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);
    </script>
  </body>
</html>